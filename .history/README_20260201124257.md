# ğŸ¨ Art Club Fund Manager

á»¨ng dá»¥ng quáº£n lÃ½ quá»¹ CLB Nghá»‡ Thuáº­t - NÆ¡i Ä‘am mÃª thÄƒng hoa! ğŸ­

## âœ¨ Features

- ğŸ” **Authentication**: Supabase Auth vá»›i 3 roles (SUPER_ADMIN, ADMIN, MEMBER)
- ğŸ’° **Fund Management**: Ná»™p quá»¹ hÃ ng tuáº§n vá»›i upload áº£nh chá»©ng minh
- âœ… **Approval System**: Admin duyá»‡t/tá»« chá»‘i contributions
- ğŸ“Š **Analytics**: Thá»‘ng kÃª chi tiáº¿t theo tuáº§n, thÃ¡ng, bá»™ mÃ´n
- ğŸ“§ **Email Reminders**: Tá»± Ä‘á»™ng nháº¯c nhá»Ÿ thÃ nh viÃªn chÆ°a ná»™p quá»¹
- ğŸ“¥ **Excel Export**: Xuáº¥t bÃ¡o cÃ¡o Excel Ä‘áº§y Ä‘á»§
- ğŸ¨ **Modern UI**: Dark theme, Framer Motion animations, Mobile-first

## ğŸ› ï¸ Tech Stack

- **Framework**: Next.js 16 (App Router)
- **Language**: TypeScript
- **Database**: PostgreSQL + Prisma ORM
- **Auth & Storage**: Supabase
- **UI**: Tailwind CSS + Shadcn/UI
- **Animations**: Framer Motion
- **Charts**: Recharts
- **Email**: Resend
- **Excel**: XLSX

## ğŸš€ Quick Start

### Prerequisites

- Node.js 20+
- PostgreSQL database (Supabase)
- Supabase account
- Resend account (for emails)

### Installation

1. **Clone & Install**

```bash
git clone <your-repo>
cd art-club-fund-manager
npm install
```

2. **Setup Environment**

```bash
# Copy .env.example to .env
cp .env.example .env

# Update with your credentials
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
DATABASE_URL=your_database_url
DIRECT_URL=your_direct_url
RESEND_API_KEY=your_resend_key
```

3. **Setup Database**

```bash
# Push schema to database
npm run db:push

# Generate Prisma Client
npm run db:generate

# Seed initial data (optional)
npm run db:seed
```

4. **Setup Supabase Storage**

- Create bucket "receipts" (public)
- Setup Storage Policies
- See `SUPABASE_STORAGE_SETUP.md` for details

5. **Run Development Server**

```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000)

## ğŸ“‹ Available Scripts

```bash
npm run dev          # Start dev server
npm run build        # Build for production
npm run start        # Start production server
npm run lint         # Run ESLint

# Database
npm run db:push      # Push schema to database
npm run db:generate  # Generate Prisma Client
npm run db:seed      # Seed database

# Utilities
npm run check        # Check setup status
npm run fix:env      # Fix Supabase environment
npm run fix:amount   # Update amount to 20,000Ä‘
```

## ğŸ”§ Recent Updates

### 2026-02-01: Amount Update (50,000Ä‘ â†’ 20,000Ä‘)

**What changed:**

- âœ… Default weekly fund amount: 20,000Ä‘
- âœ… All UI displays updated
- âœ… Database schema updated
- âœ… Calculations fixed

**How to apply:**

```bash
# 1. Check current setup
npm run check

# 2. Fix Supabase key (if needed)
npm run fix:env

# 3. Update database
npm run fix:amount

# 4. Restart server
npm run dev
```

ğŸ“– **Full guide**: See `QUICK_FIX.md`

## ğŸ“š Documentation

| File                        | Description                   |
| --------------------------- | ----------------------------- |
| `QUICK_FIX.md`              | Quick fix guide (start here!) |
| `FIX_GUIDE.md`              | Complete setup guide          |
| `SUPABASE_STORAGE_SETUP.md` | Supabase Storage setup        |
| `UPDATE_DATABASE.md`        | Database update details       |
| `CHANGELOG.md`              | All changes log               |

## ğŸ—ï¸ Project Structure

```
art-club-fund-manager/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ actions/           # Server Actions
â”‚   â”œâ”€â”€ api/               # API Routes
â”‚   â”œâ”€â”€ dashboard/         # Member dashboard
â”‚   â”œâ”€â”€ admin/             # Admin panel
â”‚   â””â”€â”€ super-admin/       # Super admin panel
â”œâ”€â”€ components/            # React components
â”‚   â””â”€â”€ ui/               # Shadcn/UI components
â”œâ”€â”€ emails/               # Email templates
â”œâ”€â”€ lib/                  # Utilities
â”‚   â”œâ”€â”€ supabase/        # Supabase clients
â”‚   â”œâ”€â”€ prisma.ts        # Prisma client
â”‚   â””â”€â”€ excel-export.ts  # Excel generation
â”œâ”€â”€ prisma/              # Database
â”‚   â”œâ”€â”€ schema.prisma    # Database schema
â”‚   â”œâ”€â”€ seed.ts          # Seed data
â”‚   â””â”€â”€ migrations/      # SQL migrations
â””â”€â”€ scripts/             # Utility scripts
```

## ğŸ‘¥ User Roles

### MEMBER

- View personal dashboard
- Upload weekly fund proof
- Track payment history

### ADMIN

- All MEMBER permissions
- Approve/reject contributions
- View analytics
- Send reminder emails
- Export Excel reports

### SUPER_ADMIN

- All ADMIN permissions
- Manage users (roles, departments)
- Update club settings
- Delete users

## ğŸ¨ UI Features

- ğŸŒ™ Dark theme with purple/pink gradients
- âœ¨ Smooth Framer Motion animations
- ğŸ“± Mobile-first responsive design
- ğŸ­ Department-specific colors & icons
- ğŸ“Š Interactive charts (Recharts)
- ğŸ–¼ï¸ Image zoom & download
- ğŸ¯ Matrix view for payment tracking

## ğŸ” Security

- Row Level Security (RLS) via Supabase
- Role-based access control (RBAC)
- Middleware route protection
- Secure file upload to Supabase Storage
- Environment variables for secrets

## ğŸ“§ Email Features

- Reminder emails for unpaid members
- Approval/rejection notifications
- Bulk email sending ("Nuclear Option")
- Beautiful HTML templates

## ğŸ“Š Analytics Features

- Weekly revenue trends (8 weeks)
- Department breakdown
- Member completion rate
- Monthly revenue tracking
- Debtors count
- Payment matrix (12 weeks)

## ğŸ› Troubleshooting

### Upload not working?

```bash
# Check setup
npm run check

# Fix Supabase key
npm run fix:env

# Verify Storage bucket exists
# â†’ https://supabase.com/dashboard
```

### Wrong amount displayed?

```bash
# Update to 20,000Ä‘
npm run fix:amount

# Restart server
npm run dev
```

### Database issues?

```bash
# Reset database
npm run db:push

# Regenerate client
npm run db:generate
```

## ğŸ¤ Contributing

This is a student project for an Art Club. Feel free to fork and adapt for your own club!

## ğŸ“ License

Private project for CLB Nghá»‡ Thuáº­t

## ğŸ™ Credits

- Built with â¤ï¸ by a web programming student
- Assisted by Kiro AI
- For CLB Nghá»‡ Thuáº­t members

---

**Current Version**: 1.0.0  
**Last Updated**: 2026-02-01  
**Status**: âœ… Production Ready (after Supabase setup)
